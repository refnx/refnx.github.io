
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>refnx.reduce package &#8212; refnx 0.0.13.dev0+8d6438f documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0.13.dev0+8d6438f',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="refnx-reduce-package">
<h1>refnx.reduce package<a class="headerlink" href="#refnx-reduce-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-refnx.reduce.bounded_splines">
<span id="refnx-reduce-bounded-splines-module"></span><h2>refnx.reduce.bounded_splines module<a class="headerlink" href="#module-refnx.reduce.bounded_splines" title="Permalink to this headline">¶</a></h2>
<p>Copyright (c) 2011, Joshua M. Hykes
All rights reserved.</p>
<p>Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:</p>
<blockquote>
<div><ul class="simple">
<li>Redistributions of source code must retain the above copyright
notice, this list of conditions and the following disclaimer.</li>
<li>Redistributions in binary form must reproduce the above copyright
notice, this list of conditions and the following disclaimer in the
documentation and/or other materials provided with the distribution.</li>
</ul>
</div></blockquote>
<p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS “AS IS” AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL JOSHUA M. HYKES BE LIABLE FOR ANY
DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>
<dl class="class">
<dt id="refnx.reduce.bounded_splines.BoundedRectBivariateSpline">
<em class="property">class </em><code class="descclassname">refnx.reduce.bounded_splines.</code><code class="descname">BoundedRectBivariateSpline</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>z</em>, <em>fill_value=0.0</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/bounded_splines.html#BoundedRectBivariateSpline"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.bounded_splines.BoundedRectBivariateSpline" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">scipy.interpolate.fitpack2.RectBivariateSpline</span></code></p>
<p>2D spline that returns a constant for x outside the specified domain.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>x</strong> (<em>array_like</em>) – bin edges in x direction, length m+1</li>
<li><strong>y</strong> (<em>array_like</em>) – bin edges in y direction, length n+1,</li>
<li><strong>z</strong> (<em>array_like</em>) – values of function to fit spline, m by n</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="refnx.reduce.bounded_splines.BoundedRectBivariateSpline.integral">
<code class="descname">integral</code><span class="sig-paren">(</span><em>xa</em>, <em>xb</em>, <em>ya</em>, <em>yb</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/bounded_splines.html#BoundedRectBivariateSpline.integral"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.bounded_splines.BoundedRectBivariateSpline.integral" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="refnx.reduce.bounded_splines.BoundedRectBivariateSpline.is_outside_domain">
<code class="descname">is_outside_domain</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/bounded_splines.html#BoundedRectBivariateSpline.is_outside_domain"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.bounded_splines.BoundedRectBivariateSpline.is_outside_domain" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="refnx.reduce.bounded_splines.BoundedUnivariateSpline">
<em class="property">class </em><code class="descclassname">refnx.reduce.bounded_splines.</code><code class="descname">BoundedUnivariateSpline</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>fill_value=0.0</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/bounded_splines.html#BoundedUnivariateSpline"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.bounded_splines.BoundedUnivariateSpline" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">scipy.interpolate.fitpack2.UnivariateSpline</span></code></p>
<p>1D spline that returns a constant for x outside the specified domain.</p>
<dl class="method">
<dt id="refnx.reduce.bounded_splines.BoundedUnivariateSpline.integral">
<code class="descname">integral</code><span class="sig-paren">(</span><em>a</em>, <em>b</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/bounded_splines.html#BoundedUnivariateSpline.integral"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.bounded_splines.BoundedUnivariateSpline.integral" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="refnx.reduce.bounded_splines.BoundedUnivariateSpline.is_outside_domain">
<code class="descname">is_outside_domain</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/bounded_splines.html#BoundedUnivariateSpline.is_outside_domain"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.bounded_splines.BoundedUnivariateSpline.is_outside_domain" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-refnx.reduce.event">
<span id="refnx-reduce-event-module"></span><h2>refnx.reduce.event module<a class="headerlink" href="#module-refnx.reduce.event" title="Permalink to this headline">¶</a></h2>
<p>Unpack event files</p>
<dl class="function">
<dt id="refnx.reduce.event.events">
<code class="descclassname">refnx.reduce.event.</code><code class="descname">events</code><span class="sig-paren">(</span><em>f</em>, <em>end_last_event=127</em>, <em>max_frames=inf</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/event.html#events"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.event.events" title="Permalink to this definition">¶</a></dt>
<dd><p>Unpacks event data from packedbinary format for the ANSTO Platypus
instrument</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>f</strong> (<em>file-like</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) – The file to read the data from. If <cite>f</cite> is not file-like then f is
assumed to be a path pointing to the event file.</li>
<li><strong>end_last_event</strong> (<em>uint</em>) – The reading of event data starts from <cite>end_last_event + 1</cite>. The default
of 127 corresponds to a file header that is 128 bytes long.</li>
<li><strong>max_frames</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)"><em>int</em></a>) – Stop reading the event file when have read this many frames.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">x_events, y_events, t_events and f_events are numpy arrays containing
the events. end_last_event is a byte offset to the end of the last
successful event read from the file. Use this value to extract more
events from the same file at a future date.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">(f_events, t_events, y_events, x_events), end_last_event</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="refnx.reduce.event.framebins_to_frames">
<code class="descclassname">refnx.reduce.event.</code><code class="descname">framebins_to_frames</code><span class="sig-paren">(</span><em>frame_bins</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/event.html#framebins_to_frames"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.event.framebins_to_frames" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="refnx.reduce.event.process_event_stream">
<code class="descclassname">refnx.reduce.event.</code><code class="descname">process_event_stream</code><span class="sig-paren">(</span><em>events</em>, <em>frames</em>, <em>t_bins</em>, <em>y_bins</em>, <em>x_bins</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/event.html#process_event_stream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.event.process_event_stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Processes the event mode dataset into a histogrammed detector image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>events</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.6)"><em>tuple</em></a><em>(</em><em>np.ndarray</em><em>, </em><em>np.ndarray</em><em>, </em><em>np.ndarray</em><em>, </em><em>np.ndarray</em><em>)</em>) – the 4-tuple of events (F, T, Y, X)</li>
<li><strong>frames</strong> (<em>sequence of array-like</em>) – each array in the sequence specifies which frames should be included</li>
<li><strong>t_bins</strong> (<em>array_like</em>) – specifies the time bins required in the image</li>
<li><strong>y_bins</strong> (<em>array_like</em>) – specifies the y bins required in the image</li>
<li><strong>x_bins</strong> (<em>array_like</em>) – specifies the x bins required in the image</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>detector, frame_count</strong> – The new detector images and the number of frames within each image.
<cite>detector</cite> has shape
<cite>(len(frames), len(t_bins) - 1, len(y_bins) - 1, len(x_bins) - 1)</cite>.
<cite>frame_count</cite> says how many frames went into making each frame in the
detector image</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">np.ndarray, np.ndarray</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>Every entry in <cite>frames</cite> is clipped to 0 and the maximum frame number in the
events. Thus, if
frames = [[-2, -1, 0, 1, 2, 3]], and the maximum frame number is 2, then
only the 0, 1, 2 frames are included.</p>
</dd></dl>

</div>
<div class="section" id="module-refnx.reduce.parabolic_motion">
<span id="refnx-reduce-parabolic-motion-module"></span><h2>refnx.reduce.parabolic_motion module<a class="headerlink" href="#module-refnx.reduce.parabolic_motion" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="refnx.reduce.parabolic_motion.parabola">
<code class="descclassname">refnx.reduce.parabolic_motion.</code><code class="descname">parabola</code><span class="sig-paren">(</span><em>initial_trajectory</em>, <em>speed</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/parabolic_motion.html#parabola"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.parabolic_motion.parabola" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the quadratic form of the parabolic path</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>initial_trajectory</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – The initial angular trajectory of the path (degrees), measured from
the x-axis. A positive angle is in an anticlockwise direction.</li>
<li><strong>speed</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – The initial speed of the object (m/s)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>eqn</strong> – Equation of parabolic path</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">np.polynomial.Polynomial object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-refnx.reduce.peak_utils">
<span id="refnx-reduce-peak-utils-module"></span><h2>refnx.reduce.peak_utils module<a class="headerlink" href="#module-refnx.reduce.peak_utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="refnx.reduce.peak_utils.centroid">
<code class="descclassname">refnx.reduce.peak_utils.</code><code class="descname">centroid</code><span class="sig-paren">(</span><em>y</em>, <em>x=None</em>, <em>dx=1.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/peak_utils.html#centroid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.peak_utils.centroid" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the centroid for the specified data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>y</strong> (<em>array_like</em>) – Array whose centroid is to be calculated.</li>
<li><strong>x</strong> (<em>array_like</em><em>, </em><em>optional</em>) – The points at which y is sampled.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><em>(centroid, sd)</em> – Centroid and standard deviation of the data. If there are no
intensities at all in <cite>y</cite>, then <cite>centroid</cite> and <cite>sd</cite> are <cite>np.nan</cite>.</li>
<li><em>This is not really all that good of an algorithm, unless the peak is much</em></li>
<li><em>higher than the background</em></li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="refnx.reduce.peak_utils.gauss">
<code class="descclassname">refnx.reduce.peak_utils.</code><code class="descname">gauss</code><span class="sig-paren">(</span><em>x</em>, <em>bkg</em>, <em>peak</em>, <em>mean</em>, <em>sd</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/peak_utils.html#gauss"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.peak_utils.gauss" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the gaussian function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<em>array_like</em>) – The points at which the distribution is sampled.</li>
<li><strong>bkg</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – constant background value.</li>
<li><strong>peak</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – peak multiplier.</li>
<li><strong>mean</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – mean of gaussian distribution.</li>
<li><strong>sd</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – standard deviation of distribution.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>gval</strong> – evaluated gaussian distribution value at each of the sampling points.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)">float</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="refnx.reduce.peak_utils.gauss_fit">
<code class="descclassname">refnx.reduce.peak_utils.</code><code class="descname">gauss_fit</code><span class="sig-paren">(</span><em>p0</em>, <em>x</em>, <em>y</em>, <em>sigma=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/peak_utils.html#gauss_fit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.peak_utils.gauss_fit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="refnx.reduce.peak_utils.median">
<code class="descclassname">refnx.reduce.peak_utils.</code><code class="descname">median</code><span class="sig-paren">(</span><em>y</em>, <em>x=None</em>, <em>dx=1.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/peak_utils.html#median"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.peak_utils.median" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the median of the specified data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>y</strong> (<em>array_like</em>) – Array whose median is to be calculated.</li>
<li><strong>x</strong> (<em>array_like</em><em>, </em><em>optional</em>) – The points at which y is sampled.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>(median, sd)</strong> – Centroid and standard deviation of the data.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)">float</a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)">float</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="refnx.reduce.peak_utils.peak_finder">
<code class="descclassname">refnx.reduce.peak_utils.</code><code class="descname">peak_finder</code><span class="sig-paren">(</span><em>y</em>, <em>x=None</em>, <em>sigma=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/peak_utils.html#peak_finder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.peak_utils.peak_finder" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds a peak in the specified data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>y</strong> (<em>array_like</em>) – Array in which a peak is to be found.</li>
<li><strong>x</strong> (<em>array_like</em><em>, </em><em>optional</em>) – The points at which y is sampled.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>(centroid, sd), (gfit_mean, gfit_sd)</strong> (<em>(float, float), (float, float)</em>)</li>
<li><em>centroid and sd are the centroid and standard deviation of the data.</em></li>
<li><em>gfit_mean and gfit_sd are the mean and standard deviation obtained by</em></li>
<li><em>fitting the data to a Gaussian function.</em></li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-refnx.reduce.platypusnexus">
<span id="refnx-reduce-platypusnexus-module"></span><h2>refnx.reduce.platypusnexus module<a class="headerlink" href="#module-refnx.reduce.platypusnexus" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="refnx.reduce.platypusnexus.Catalogue">
<em class="property">class </em><code class="descclassname">refnx.reduce.platypusnexus.</code><code class="descname">Catalogue</code><span class="sig-paren">(</span><em>h5d</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#Catalogue"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.platypusnexus.Catalogue" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Extract relevant parts of a NeXus file for reflectometry reduction</p>
<dl class="attribute">
<dt id="refnx.reduce.platypusnexus.Catalogue.datafile_number">
<code class="descname">datafile_number</code><a class="headerlink" href="#refnx.reduce.platypusnexus.Catalogue.datafile_number" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="refnx.reduce.platypusnexus.PlatypusNexus">
<em class="property">class </em><code class="descclassname">refnx.reduce.platypusnexus.</code><code class="descname">PlatypusNexus</code><span class="sig-paren">(</span><em>h5data</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#PlatypusNexus"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.platypusnexus.PlatypusNexus" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Processes Platypus NeXus files to produce an intensity vs wavelength
spectrum</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>h5data</strong> (<em>HDF5 NeXus file</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) – An HDF5 NeXus file for Platypus, or a <cite>str</cite> containing the path
to one</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="refnx.reduce.platypusnexus.PlatypusNexus.chod">
<code class="descname">chod</code><span class="sig-paren">(</span><em>omega=0.0</em>, <em>twotheta=0.0</em>, <em>scanpoint=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#PlatypusNexus.chod"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.platypusnexus.PlatypusNexus.chod" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the flight length of the neutrons in the Platypus
instrument.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>omega</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a><em>, </em><em>optional</em>) – Rough angle of incidence</li>
<li><strong>twotheta</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a><em>, </em><em>optional</em>) – Rough 2 theta angle</li>
<li><strong>scanpoint</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)"><em>int</em></a><em>, </em><em>optional</em>) – Which dataset is being considered</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>chod, d_cx</strong> – Flight distance (mm), distance between chopper discs (mm)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)">float</a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)">float</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="refnx.reduce.platypusnexus.PlatypusNexus.phase_angle">
<code class="descname">phase_angle</code><span class="sig-paren">(</span><em>scanpoint=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#PlatypusNexus.phase_angle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.platypusnexus.PlatypusNexus.phase_angle" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the phase angle for a given scanpoint</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>scanpoint</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)"><em>int</em></a>) – The scanpoint you’re interested in</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>phase_angle, master_opening</strong> – The phase angle in degrees, and the angular opening of the master
chopper</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)">float</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="refnx.reduce.platypusnexus.PlatypusNexus.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>h5norm=None</em>, <em>lo_wavelength=2.5</em>, <em>hi_wavelength=19.0</em>, <em>background=True</em>, <em>direct=False</em>, <em>omega=None</em>, <em>twotheta=None</em>, <em>rebin_percent=1.0</em>, <em>wavelength_bins=None</em>, <em>normalise=True</em>, <em>integrate=-1</em>, <em>eventmode=None</em>, <em>event_folder=None</em>, <em>peak_pos=None</em>, <em>peak_pos_tol=0.01</em>, <em>background_mask=None</em>, <em>normalise_bins=True</em>, <em>manual_beam_find=None</em>, <em>event_filter=None</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#PlatypusNexus.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.platypusnexus.PlatypusNexus.process" title="Permalink to this definition">¶</a></dt>
<dd><p>Processes the ProcessNexus object to produce a time of flight spectrum.
The processed spectrum is stored in the <cite>processed_spectrum</cite> attribute.
The specular spectrum is also returned from this function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>h5norm</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a><em> or </em><em>HDF5 NeXus file</em>) – If a str then <cite>h5norm</cite> is a path to the floodfield data, otherwise
it is a hdf5 file handle containing the floodfield data.</li>
<li><strong>lo_wavelength</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – The low wavelength cutoff for the rebinned data (A).</li>
<li><strong>hi_wavelength</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – The high wavelength cutoff for the rebinned data (A).</li>
<li><strong>background</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.6)"><em>bool</em></a>) – Should a background subtraction be carried out?</li>
<li><strong>direct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.6)"><em>bool</em></a>) – Is it a direct beam you measured? This is so a gravity correction
can be applied.</li>
<li><strong>omega</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – Expected angle of incidence of beam. If this is None, then the
rough angle of incidence is obtained from the NeXus file.</li>
<li><strong>twotheta</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – Expected two theta value of specular beam. If this is None then
the rough angle of incidence is obtained from the NeXus file.</li>
<li><strong>rebin_percent</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – Specifies the rebinning percentage for the spectrum.  If
<cite>rebin_percent is None</cite>, then no rebinning is done.</li>
<li><strong>wavelength_bins</strong> (<em>array_like</em>) – The wavelength bins for rebinning.  If <cite>wavelength_bins is not
None</cite> then the <cite>rebin_percent</cite> parameter is ignored.</li>
<li><strong>normalise</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.6)"><em>bool</em></a>) – Normalise by the monitor counts.</li>
<li><strong>integrate</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)"><em>int</em></a>) – <p>Specifies which scanpoints to use.</p>
<blockquote>
<div><ul>
<li>integrate == -1
the spectrum is integrated over all the scanpoints.</li>
<li>integrate &gt;= 0
the individual spectra are calculated individually.
If <cite>eventmode is not None</cite>, or <cite>event_filter is not None</cite> then
integrate specifies which scanpoint to examine.</li>
</ul>
</div></blockquote>
</li>
<li><strong>eventmode</strong> (<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.6)"><em>None</em></a><em> or </em><em>array_like</em>) – If eventmode is <cite>None</cite> then the integrated detector image is used.
If eventmode is an array then the array specifies the integration
times (in seconds) for the detector image, e.g. [0, 20, 30] would
result in two spectra. The first would contain data for 0 s to 20s,
the second would contain data for 20 s to 30 s.  This option can
only be used when <cite>integrate &gt;= -1</cite>.
If eventmode has zero length (e.g. []), then a single time interval
for the entire acquisition is used, [0, acquisition_time].  This
would source the image from the eventmode file, rather than the
NeXUS file. The two approaches will probably not give
identical results, because the eventmode method adjusts the total
acquisition time and beam monitor counts to the frame number of the
last event detected (which may be quite different if the count rate
is very low). This parameter is disregarded if <cite>event_filter</cite> is
provided.</li>
<li><strong>event_folder</strong> (<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.6)"><em>None</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) – Specifies the path for the eventmode data. If
<cite>event_folder is None</cite> then the eventmode data is assumed to reside
in the same directory as the NeXUS file. If event_folder is a
string, then the string specifies the path to the eventmode data.</li>
<li><strong>peak_pos</strong> (<em>-1</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.6)"><em>None</em></a><em>, or </em><em>(</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a><em>)</em>) – <p>Options for finding specular peak position and peak standard
deviation.</p>
<ul>
<li><dl class="first docutils">
<dt>-1</dt>
<dd>use <cite>manual_beam_find</cite>.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>None</dt>
<dd>use the automatic beam finder, falling back to
<cite>manual_beam_find</cite> if it’s provided.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>(float, float)</dt>
<dd>specify the peak and peak standard deviation.</dd>
</dl>
</li>
</ul>
</li>
<li><strong>peak_pos_tol</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – Convergence tolerance for the beam position and width to be
accepted from successive beam-finder calculations; see the
<cite>tol</cite> parameter in the <cite>find_specular_ridge</cite> function.</li>
<li><strong>background_mask</strong> (<em>array_like</em>) – An array of bool that specifies which y-pixels to use for
background subtraction.  Should be the same length as the number of
y pixels in the detector image.  Otherwise an automatic mask is
applied (if background is True).</li>
<li><strong>normalise_bins</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.6)"><em>bool</em></a>) – Divides the intensity in each wavelength bin by the width of the
bin. This allows one to compare spectra even if they were processed
with different rebin percentages.</li>
<li><strong>manual_beam_find</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#callable" title="(in Python v3.6)"><em>callable</em></a><em>, </em><em>optional</em>) – A function which allows the location of the specular ridge to be
determined. Has the signature <cite>f(detector, detector_err)</cite> where
<cite>detector</cite> and <cite>detector_err</cite> is the detector image and its
uncertainty. <cite>detector</cite> and <cite>detector_err</cite> have shape (n, t, y)
where <cite>n</cite> is the number of detector images, <cite>t</cite> is the number of
time of flight bins and <cite>y</cite> is the number of y pixels. The function
should return a tuple,
<cite>(centre, centre_sd, lopx, hipx, background_pixels)</cite>. <cite>centre</cite>,
<cite>centre_sd</cite>, <cite>lopx</cite>, <cite>hipx</cite> should be arrays of shape <cite>(n, )</cite>,
specifying the beam centre, beam width (standard deviation), lowest
pixel of foreground region, highest pixel of foreground region.
<cite>background_pixels</cite> is a list of length <cite>n</cite>. Each of the entries
should contain arrays of pixel numbers that specify the background
region for each of the detector images.</li>
<li><strong>event_filter</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#callable" title="(in Python v3.6)"><em>callable</em></a><em>, </em><em>optional</em>) – <p>A function, that processes the event stream, returning a <cite>detector</cite>
array, and a <cite>frame_count</cite> array. <cite>detector</cite> has shape
<cite>(N, T, Y, X)</cite>, where <cite>N</cite> is the number of detector images, <cite>T</cite> is
the number of time bins (<cite>len(t_bins)</cite>), etc. <cite>frame_count</cite> has
shape <cite>(N,)</cite> and contains the number of frames for each of the
detector images. The frame_count is used to determine what fraction
of the overall monitor counts should be ascribed to each detector
image (by dividing by the total number of frames). The function has
signature:</p>
<dl class="docutils">
<dt>detector, frame_count = event_filter(loaded_events,</dt>
<dd>t_bins=None,
y_bins=None,
x_bins=None)</dd>
</dl>
<p><cite>loaded_events</cite> is a 4-tuple of numpy arrays:
<cite>(f_events, t_events, y_events, x_events)</cite>, where <cite>f_events</cite>
contains the frame number for each neutron, landing at position
<cite>x_events, y_events</cite> on the detector, with time-of-flight
<cite>t_events</cite>.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>After processing this object contains the following the following
attributes:</p>
<ul class="simple">
<li>path - path to the data file</li>
<li>datafilename - name of the datafile</li>
<li>datafile_number - datafile number.</li>
<li>m_topandtail - the corrected 2D detector image, (n_spectra, TOF, Y)</li>
<li>m_topandtail_sd - corresponding standard deviations</li>
<li>n_spectra - number of spectra in processed data</li>
<li>bm1_counts - beam montor counts, (n_spectra,)</li>
<li>m_spec - specular intensity, (n_spectra, TOF)</li>
<li>m_spec_sd - corresponding standard deviations</li>
<li>m_beampos - beam_centre for each spectrum, (n_spectra, )</li>
<li>m_lambda - wavelengths for each spectrum, (n_spectra, TOF)</li>
<li>m_lambda_fwhm - corresponding FWHM of wavelength distribution</li>
<li>m_lambda_hist - wavelength bins for each spectrum, (n_spectra, TOF)</li>
<li>m_spec_tof - TOF for each wavelength bin, (n_spectra, TOF)</li>
<li>mode - the Platypus mode, e.g. FOC/MT/POL/POLANAL/SB/DB</li>
<li>detector_z - detector height, (n_spectra, )</li>
<li>detector_y - sample-detector distance, (n_spectra, )</li>
<li>domega - collimation uncertainty</li>
<li>lopx - lowest extent of specular beam (in y pixels), (n_spectra, )</li>
<li>hipx - highest extent of specular beam (in y pixels), (n_spectra, )</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>m_lambda, m_spec, m_spec_sd</strong> – Arrays containing the wavelength, specular intensity as a function
of wavelength, standard deviation of specular intensity</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">np.ndarray</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="refnx.reduce.platypusnexus.PlatypusNexus.process_event_stream">
<code class="descname">process_event_stream</code><span class="sig-paren">(</span><em>t_bins=None</em>, <em>x_bins=None</em>, <em>y_bins=None</em>, <em>frame_bins=None</em>, <em>scanpoint=0</em>, <em>event_folder=None</em>, <em>event_filter=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#PlatypusNexus.process_event_stream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.platypusnexus.PlatypusNexus.process_event_stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Processes the event mode dataset for the NeXUS file. Assumes that
there is a event mode directory in the same directory as the NeXUS
file, as specified by in ‘entry1/instrument/detector/daq_dirname’</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>t_bins</strong> (<em>array_like</em><em>, </em><em>optional</em>) – specifies the time bins required in the image</li>
<li><strong>x_bins</strong> (<em>array_like</em><em>, </em><em>optional</em>) – specifies the x bins required in the image</li>
<li><strong>y_bins</strong> (<em>array_like</em><em>, </em><em>optional</em>) – specifies the y bins required in the image</li>
<li><strong>scanpoint</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)"><em>int</em></a><em>, </em><em>optional</em>) – Scanpoint you are interested in</li>
<li><strong>event_folder</strong> (<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.6)"><em>None</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) – Specifies the path for the eventmode data. If
<cite>event_folder is None</cite> then the eventmode data is assumed to reside
in the same directory as the NeXUS file. If event_folder is a
string, then the string specifies the path to the eventmode data.</li>
<li><strong>frame_bins</strong> (<em>array_like</em><em>, </em><em>optional</em>) – specifies the frame bins required in the image. If
frame_bins = [5, 10, 120] you will get 2 images.  The first starts
at 5s and finishes at 10s. The second starts at 10s and finishes
at 120s. If frame_bins has zero length, e.g. [], then a single
interval consisting of the entire acquisition time is used:
[0, acquisition_time]. If <cite>event_filter</cite> is provided then this
parameter is ignored.</li>
<li><strong>event_filter</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#callable" title="(in Python v3.6)"><em>callable</em></a><em>, </em><em>optional</em>) – <p>A function, that processes the event stream, returning a <cite>detector</cite>
array, and a <cite>frame_count</cite> array. <cite>detector</cite> has shape
<cite>(N, T, Y, X)</cite>, where <cite>N</cite> is the number of detector images, <cite>T</cite> is
the number of time bins (<cite>len(t_bins)</cite>), etc. <cite>frame_count</cite> has
shape <cite>(N,)</cite> and contains the number of frames for each of the
detector images. The frame_count is used to determine what fraction
of the overall monitor counts should be ascribed to each detector
image. The function has signature:</p>
<dl class="docutils">
<dt>detector, frame_count = event_filter(loaded_events,</dt>
<dd>t_bins=None,
y_bins=None,
x_bins=None)</dd>
</dl>
<p><cite>loaded_events</cite> is a 4-tuple of numpy arrays:
<cite>(f_events, t_events, y_events, x_events)</cite>, where <cite>f_events</cite>
contains the frame number for each neutron, landing at position
<cite>x_events, y_events</cite> on the detector, with time-of-flight
<cite>t_events</cite>.</p>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>detector, frame_count, bm1_counts</strong> (<em>np.ndarray, np.ndarray, np.ndarray</em>)</li>
<li><em>Create a new detector image based on the t_bins, x_bins, y_bins and</em></li>
<li><em>frame_bins you supply to the method (these should all be lists/numpy</em></li>
<li><em>arrays specifying the edges of the required bins). If these are not</em></li>
<li><em>specified, then the default bins are taken from the nexus file. This</em></li>
<li><em>would essentially return the same detector image as the nexus file.</em></li>
<li><em>However, you can specify the frame_bins list to generate detector</em></li>
<li><em>images based on subdivided periods of the total acquisition.</em></li>
<li><em>For example if frame_bins = [5, 10, 120] you will get 2 images.  The</em></li>
<li><em>first starts at 5s and finishes at 10s. The second starts at 10s</em></li>
<li><em>and finishes at 120s. The frame_bins are clipped to the total</em></li>
<li><em>acquisition time if necessary.</em></li>
<li><cite>frame_count</cite> is how many frames went into making each detector image.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="refnx.reduce.platypusnexus.PlatypusNexus.spectrum">
<code class="descname">spectrum</code><a class="headerlink" href="#refnx.reduce.platypusnexus.PlatypusNexus.spectrum" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="refnx.reduce.platypusnexus.PlatypusNexus.write_spectrum_dat">
<code class="descname">write_spectrum_dat</code><span class="sig-paren">(</span><em>f</em>, <em>scanpoint=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#PlatypusNexus.write_spectrum_dat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.platypusnexus.PlatypusNexus.write_spectrum_dat" title="Permalink to this definition">¶</a></dt>
<dd><p>This method writes a dat representation of the corrected spectrum to
file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>f</strong> (<em>file-like</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) – The file to write the spectrum to, or a str that specifies the file
name</li>
<li><strong>scanpoint</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)"><em>int</em></a>) – Which scanpoint to write</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>processed</strong> – If the file hasn’t been processed then the <cite>processed is False</cite> and
vice versa</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.6)">bool</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="refnx.reduce.platypusnexus.PlatypusNexus.write_spectrum_xml">
<code class="descname">write_spectrum_xml</code><span class="sig-paren">(</span><em>f</em>, <em>scanpoint=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#PlatypusNexus.write_spectrum_xml"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.platypusnexus.PlatypusNexus.write_spectrum_xml" title="Permalink to this definition">¶</a></dt>
<dd><p>This method writes an XML representation of the corrected spectrum to
file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>f</strong> (<em>file-like</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) – The file to write the spectrum to, or a str that specifies the file
name</li>
<li><strong>scanpoint</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)"><em>int</em></a>) – Which scanpoint to write</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="refnx.reduce.platypusnexus.accumulate_HDF_files">
<code class="descclassname">refnx.reduce.platypusnexus.</code><code class="descname">accumulate_HDF_files</code><span class="sig-paren">(</span><em>files</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#accumulate_HDF_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.platypusnexus.accumulate_HDF_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Accumulates HDF files together, writing an accumulated file in the current
directory. The accumulated datafile is written in the current directory
(os.getcwd()) and has a filename based on the first file, prepended by
‘ADD_’. For example, if the first file is PLP0000708.nx.hdf then the
accumulated file is ADD_PLP0000708.nx.hdf.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>files</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.6)"><em>list</em></a>) – Strings specifying NeXUS filenames to be added together.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="refnx.reduce.platypusnexus.background_subtract">
<code class="descclassname">refnx.reduce.platypusnexus.</code><code class="descname">background_subtract</code><span class="sig-paren">(</span><em>detector</em>, <em>detector_sd</em>, <em>background_mask</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#background_subtract"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.platypusnexus.background_subtract" title="Permalink to this definition">¶</a></dt>
<dd><p>Background subtraction of Platypus detector image.
Shape of detector is (N, T, Y), do a linear background subn for each
(N, T) slice.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>detector</strong> (<em>np.ndarray</em>) – detector array with shape (N, T, Y).</li>
<li><strong>detector_sd</strong> (<em>np.ndarray</em>) – standard deviations for detector array</li>
<li><strong>background_mask</strong> (<em>array_like</em>) – array of bool with shape (N, T, Y) that specifies which Y pixels to use
for background subtraction.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>detector, detector_sd</strong> – Detector image with background subtracted</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">np.ndarray, np.ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="refnx.reduce.platypusnexus.background_subtract_line">
<code class="descclassname">refnx.reduce.platypusnexus.</code><code class="descname">background_subtract_line</code><span class="sig-paren">(</span><em>profile</em>, <em>profile_sd</em>, <em>background_mask</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#background_subtract_line"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.platypusnexus.background_subtract_line" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs a linear background subtraction on a 1D peak profile</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>profile</strong> (<em>np.ndarray</em>) – 1D profile</li>
<li><strong>profile_sd</strong> (<em>np.ndarray</em>) – standard deviations for profile</li>
<li><strong>background_mask</strong> (<em>array_like</em>) – array of bool that specifies which Y pixels to use for background
subtraction.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>profile_subt, profile_subt_err</strong> – Background subtracted profile and its uncertainty</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">np.ndarray, np.ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="refnx.reduce.platypusnexus.basename_datafile">
<code class="descclassname">refnx.reduce.platypusnexus.</code><code class="descname">basename_datafile</code><span class="sig-paren">(</span><em>pth</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#basename_datafile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.platypusnexus.basename_datafile" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a NeXUS path return the basename minus the file extension.
:param pth:
:type pth: str</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>basename</strong></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)">str</a></td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">basename_datafile</span><span class="p">(</span><span class="s1">&#39;a/b/c.nx.hdf&#39;</span><span class="p">)</span>
<span class="go">&#39;c&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="refnx.reduce.platypusnexus.calculate_wavelength_bins">
<code class="descclassname">refnx.reduce.platypusnexus.</code><code class="descname">calculate_wavelength_bins</code><span class="sig-paren">(</span><em>lo_wavelength</em>, <em>hi_wavelength</em>, <em>rebin_percent</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#calculate_wavelength_bins"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.platypusnexus.calculate_wavelength_bins" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates optimal logarithmically spaced wavelength histogram bins. The
bins are equal size in log10 space, but they may not be exactly be
<cite>rebin_percent</cite> in size. The limits would have to change slightly for that.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>lo_wavelength</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – Low wavelength cutoff</li>
<li><strong>hi_wavelength</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – High wavelength cutoff</li>
<li><strong>rebin_percent</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – Rebinning percentage</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>wavelength_bins</strong></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">np.ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="refnx.reduce.platypusnexus.catalogue">
<code class="descclassname">refnx.reduce.platypusnexus.</code><code class="descname">catalogue</code><span class="sig-paren">(</span><em>start</em>, <em>stop</em>, <em>path=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#catalogue"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.platypusnexus.catalogue" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract interesting information from Platypus NeXUS files.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>start</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)"><em>int</em></a>) – start cataloguing from this run number.</li>
<li><strong>stop</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)"><em>int</em></a>) – stop cataloguing at this run number</li>
<li><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a><em>, </em><em>optional</em>) – path specifying location of NeXUS files</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>catalog</strong> – Dataframe containing interesting parameters from Platypus Nexus files</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">pd.DataFrame</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="refnx.reduce.platypusnexus.correct_for_gravity">
<code class="descclassname">refnx.reduce.platypusnexus.</code><code class="descname">correct_for_gravity</code><span class="sig-paren">(</span><em>detector</em>, <em>detector_sd</em>, <em>lamda</em>, <em>coll_distance</em>, <em>sample_det</em>, <em>lo_wavelength</em>, <em>hi_wavelength</em>, <em>theta=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#correct_for_gravity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.platypusnexus.correct_for_gravity" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a gravity corrected yt plot, given the data, its associated errors,
the wavelength corresponding to each of the time bins, and the trajectory
of the neutrons. Low lambda and high Lambda are wavelength cutoffs to
ignore.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>detector</strong> (<em>np.ndarray</em>) – Detector image. Has shape (N, T, Y)</li>
<li><strong>detector_sd</strong> (<em>np.ndarray</em>) – Standard deviations of detector image</li>
<li><strong>lamda</strong> (<em>np.ndarray</em>) – Wavelengths corresponding to the detector image, has shape (N, T)</li>
<li><strong>coll_distance</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – Collimation distance between slits, mm</li>
<li><strong>sample_det</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – Sample - detector distance, mm</li>
<li><strong>lo_wavelength</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – Low wavelength cut off, Angstrom</li>
<li><strong>hi_wavelength</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – High wavelength cutoff, Angstrom</li>
<li><strong>theta</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – Angle between second collimation slit, first collimation slit, and
horizontal</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>np.ndarray, np.ndarray, np.ndarray</p>
<p>Corrected image. This is a theoretical prediction where the spectral
ridge is for each wavelength.  This will be used to calculate the
actual angle of incidence in the reduction process.</p>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">corrected_data, corrected_data_sd, m_gravcorrcoefs</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="refnx.reduce.platypusnexus.create_detector_norm">
<code class="descclassname">refnx.reduce.platypusnexus.</code><code class="descname">create_detector_norm</code><span class="sig-paren">(</span><em>h5norm</em>, <em>x_min</em>, <em>x_max</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#create_detector_norm"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.platypusnexus.create_detector_norm" title="Permalink to this definition">¶</a></dt>
<dd><p>Produces a detector normalisation array for Platypus.
Here we average over N, T and X to provide  a relative efficiency for each
y wire.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>h5norm</strong> (<em>hdf5 file</em>) – Containing a flood field run (water)</li>
<li><strong>x_min</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)"><em>int</em></a>) – Minimum x location to use</li>
<li><strong>x_max</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)"><em>int</em></a>) – Maximum x location to use</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>norm, norm_sd</strong> – 1D array containing the normalisation data for each y pixel</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">array_like</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="refnx.reduce.platypusnexus.datafile_number">
<code class="descclassname">refnx.reduce.platypusnexus.</code><code class="descname">datafile_number</code><span class="sig-paren">(</span><em>fname</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#datafile_number"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.platypusnexus.datafile_number" title="Permalink to this definition">¶</a></dt>
<dd><p>From a filename figure out what the run number was</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>fname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) – The filename to be processed</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>run_number</strong> – The run number</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)">int</a></td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">datafile_number</span><span class="p">(</span><span class="s1">&#39;PLP0000708.nx.hdf&#39;</span><span class="p">)</span>
<span class="go">708</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="refnx.reduce.platypusnexus.find_specular_ridge">
<code class="descclassname">refnx.reduce.platypusnexus.</code><code class="descname">find_specular_ridge</code><span class="sig-paren">(</span><em>detector</em>, <em>detector_sd</em>, <em>starting_offset=50</em>, <em>tol=0.01</em>, <em>manual_beam_find=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#find_specular_ridge"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.platypusnexus.find_specular_ridge" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the specular ridges in a detector(n, t, y) plot.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>detector</strong> (<em>array_like</em>) – detector array</li>
<li><strong>detector_sd</strong> (<em>array_like</em>) – standard deviations of detector array</li>
<li><strong>tol</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – specifies threshold of fractional change for beam centre to be found</li>
<li><strong>manual_beam_find</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#callable" title="(in Python v3.6)"><em>callable</em></a><em>, </em><em>optional</em>) – A function which allows the location of the specular ridge to be
determined, IFF the autodetection of specular ridge fails.
Has the signature <cite>f(detector, detector_sd)</cite>. <cite>detector</cite> and
<cite>detector_sd</cite> have shape (n, t, y) where <cite>n</cite> is the number of detector
images, <cite>t</cite> is the number of time of flight bins and <cite>y</cite> is the number
of y pixels. The function should return a tuple,
<cite>(centre, centre_sd, lopx, hipx, background_pixels)</cite>. <cite>centre</cite>,
<cite>centre_sd</cite>, <cite>lopx</cite>, <cite>hipx</cite> should be arrays of shape <cite>(n, )</cite>,
specifying the beam centre, beam width (standard deviation), lowest
pixel of foreground region, highest pixel of foreground region.
<cite>background_pixels</cite> is a list of length <cite>n</cite>. Each of the entries
should contain arrays of pixel numbers that specify the background
region for each of the detector images.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>centre, SD, lopx, hipx, background_mask</strong> – peak centre, standard deviation of peak width, lowest pixel to be
included from background region, highest pixel to be included from
background region, array specifying points to be used for background
subtraction
<cite>np.size(centre) == n</cite>.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">np.ndarrays</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="refnx.reduce.platypusnexus.fore_back_region">
<code class="descclassname">refnx.reduce.platypusnexus.</code><code class="descname">fore_back_region</code><span class="sig-paren">(</span><em>beam_centre</em>, <em>beam_sd</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#fore_back_region"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.platypusnexus.fore_back_region" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the fore and background regions based on the beam centre and
width</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>beam_centre</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – beam_centre</li>
<li><strong>beam_sd</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – beam width (standard deviation)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>lopx, hipx, background_pixels</strong> – Lowest pixel of foreground region
Highest pixel of foreground region
Pixels that are in the background region
Each of these should have <cite>len(lopx) == len(beam_centre)</cite></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)">float</a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)">float</a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.6)">list</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="refnx.reduce.platypusnexus.number_datafile">
<code class="descclassname">refnx.reduce.platypusnexus.</code><code class="descname">number_datafile</code><span class="sig-paren">(</span><em>run_number</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#number_datafile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.platypusnexus.number_datafile" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a run number figure out what the file name is.
Given a file name, return the filename with the .nx.hdf extension</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>run_number</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>file_name</strong></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)">str</a></td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">number_datafile</span><span class="p">(</span><span class="mi">708</span><span class="p">)</span>
<span class="go">&#39;PLP0000708.nx.hdf</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">number_datafile</span><span class="p">(</span><span class="s1">&#39;PLP0000708.nx.hdf&#39;</span><span class="p">)</span>
<span class="go">&#39;PLP0000708.nx.hdf&#39;</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-refnx.reduce.rebin">
<span id="refnx-reduce-rebin-module"></span><h2>refnx.reduce.rebin module<a class="headerlink" href="#module-refnx.reduce.rebin" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="refnx.reduce.rebin.rebin">
<code class="descclassname">refnx.reduce.rebin.</code><code class="descname">rebin</code><span class="sig-paren">(</span><em>x1</em>, <em>y1</em>, <em>x2</em>, <em>y1_sd=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/rebin.html#rebin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.rebin.rebin" title="Permalink to this definition">¶</a></dt>
<dd><p>Rebin histogram values y1 from old bin edges x1 to new edges x2.
(Piecewise_constant)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x1</strong> (<em>np.ndarray</em>) – M + 1 array of old bin edges.</li>
<li><strong>y1</strong> (<em>np.ndarray</em>) – M + 1 array of old histogram values. This is the total number in
each bin, not an average.</li>
<li><strong>x2</strong> (<em>np.ndarray</em>) – N + 1 array of new bin edges.</li>
<li><strong>y1_sd</strong> (<em>np.ndarray</em><em>, </em><em>optional</em>) – Standard deviations of values in y1</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>y2 or (y2, y2_sd)</strong> (<em>np.ndarray</em>) – An array of rebinned histogram values.</li>
<li><em>The rebinning algorithm assumes that the counts in each old bin are</em></li>
<li><em>uniformly distributed in that bin.</em></li>
<li><em>Bins in x2 that are entirely outside the range of x1 are assigned 0.</em></li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="refnx.reduce.rebin.rebinND">
<code class="descclassname">refnx.reduce.rebin.</code><code class="descname">rebinND</code><span class="sig-paren">(</span><em>y1</em>, <em>axes</em>, <em>old_bins</em>, <em>new_bins</em>, <em>y1_sd=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/rebin.html#rebinND"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.rebin.rebinND" title="Permalink to this definition">¶</a></dt>
<dd><p>Rebin y1 along several axes, in a piecewise-constant fashion.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>y1</strong> (<em>array_like</em>) – The image to be rebinned</li>
<li><strong>axes</strong> (<em>tuple of int</em>) – The axes to be rebinned.</li>
<li><strong>old_bins</strong> (<em>tuple of np.ndarray</em>) – The old histogram bins along each axis in <cite>axes</cite>.</li>
<li><strong>new_bins</strong> (<em>tuple of np.ndarray</em>) – The new histogram bins along each axis in <cite>axes</cite>.</li>
<li><strong>y1_sd</strong> (<em>array_like</em><em>, </em><em>optional</em>) – Standard deviations for pixels in the image</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>output</strong> (<em>np.ndarray</em>)</li>
<li><em>–OR–</em></li>
<li><strong>(output, output_sd)</strong> (<em>np.ndarray</em>) – The rebinned image</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="refnx.reduce.rebin.rebin_along_axis">
<code class="descclassname">refnx.reduce.rebin.</code><code class="descname">rebin_along_axis</code><span class="sig-paren">(</span><em>y1</em>, <em>x1</em>, <em>x2</em>, <em>axis=0</em>, <em>y1_sd=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/rebin.html#rebin_along_axis"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.rebin.rebin_along_axis" title="Permalink to this definition">¶</a></dt>
<dd><p>Rebins an N-dimensional array along a given axis, in a piecewise-constant
fashion.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>y1</strong> (<em>array_like</em>) – The input image</li>
<li><strong>x1</strong> (<em>array_like</em>) – The monotonically increasing/decreasing original bin edges along
<cite>axis</cite>, must be 1 greater than <cite>np.size(y1, axis)</cite>.</li>
<li><strong>y2</strong> (<em>array_like</em>) – The final bin_edges along <cite>axis</cite>.</li>
<li><strong>axis</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)"><em>int</em></a>) – The axis to be rebinned, it must exist in the original image.</li>
<li><strong>y1_sd</strong> (<em>array_like</em><em>, </em><em>optional</em>) – Standard deviations for each pixel in y1.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>output</strong> (<em>np.ndarray</em>)</li>
<li><em>–OR–</em></li>
<li><strong>output, output_sd</strong> (<em>np.ndarray</em>) – The rebinned image.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-refnx.reduce.reduce">
<span id="refnx-reduce-reduce-module"></span><h2>refnx.reduce.reduce module<a class="headerlink" href="#module-refnx.reduce.reduce" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="refnx.reduce.reduce.PlatypusReduce">
<em class="property">class </em><code class="descclassname">refnx.reduce.reduce.</code><code class="descname">PlatypusReduce</code><span class="sig-paren">(</span><em>direct</em>, <em>reflect=None</em>, <em>data_folder=None</em>, <em>scale=1.0</em>, <em>save=True</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/reduce.html#PlatypusReduce"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.reduce.PlatypusReduce" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Reduces Platypus reflectometer data to give the specular reflectivity.
Offspecular data maps are also produced.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>direct</strong> (<a class="reference external" href="https://docs.python.org/3/library/string.html#module-string" title="(in Python v3.6)"><em>string</em></a><em>, </em><em>hdf5 file-handle</em><em> or </em><em>PlatypusNexus object</em>) – A string containing the path to the direct beam hdf5 file,
the hdf5 file itself, or a PlatypusNexus object.</li>
<li><strong>reflect</strong> (<a class="reference external" href="https://docs.python.org/3/library/string.html#module-string" title="(in Python v3.6)"><em>string</em></a><em>, </em><em>hdf5 file-handle</em><em> or </em><em>PlatypusNexus object</em><em>, </em><em>optional</em>) – A string containing the path to the specularly reflected hdf5 file,
the hdf5 file itself, or a PlatypusNexus object.</li>
<li><strong>data_folder</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a><em>, </em><em>optional</em>) – Where is the raw data stored?</li>
<li><strong>scale</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a><em>, </em><em>optional</em>) – Divide all specular reflectivity values by this number.</li>
<li><strong>save</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.6)"><em>bool</em></a><em>, </em><em>optional</em>) – If <cite>True</cite> then the reduced dataset is saved to the current
directory, with a name os.path.basename(reflect)</li>
<li><strong>kwds</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.6)"><em>dict</em></a><em>, </em><em>optional</em>) – Options passed directly to <cite>refnx.reduce.platypusnexus.process</cite>,
for processing of individual spectra. Look at that method docstring
for specification of options.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>If <cite>reflect</cite> was specified during construction a reduction will be
done. See <code class="docutils literal"><span class="pre">reduce</span></code> for attributes available from this object on
completion of reduction.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.6)">None</a></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="refnx.reduce.reduce.PlatypusReduce.data">
<code class="descname">data</code><span class="sig-paren">(</span><em>scanpoint=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/reduce.html#PlatypusReduce.data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.reduce.PlatypusReduce.data" title="Permalink to this definition">¶</a></dt>
<dd><p>The specular reflectivity</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>scanpoint</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)"><em>int</em></a>) – Find a particular specular reflectivity image. scanpoints upto
<cite>self.n_spectra - 1</cite> can be specified.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>(Q, R, dR, dQ)</strong> – dR is standard deviation, dQ is FWHM</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">np.ndarray tuple</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="refnx.reduce.reduce.PlatypusReduce.data2d">
<code class="descname">data2d</code><span class="sig-paren">(</span><em>scanpoint=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/reduce.html#PlatypusReduce.data2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.reduce.PlatypusReduce.data2d" title="Permalink to this definition">¶</a></dt>
<dd><p>The offspecular data</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>scanpoint</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)"><em>int</em></a>) – Find a particular offspecular image. scanpoints upto
self.n_spectra - 1 can be specified.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>(Qz, Qy, R, dR)</strong></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">np.ndarrays</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="refnx.reduce.reduce.PlatypusReduce.reduce">
<code class="descname">reduce</code><span class="sig-paren">(</span><em>reflect</em>, <em>scale=1.0</em>, <em>save=True</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/reduce.html#PlatypusReduce.reduce"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.reduce.PlatypusReduce.reduce" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduction of a single dataset.</p>
<p>The reduction uses the direct beam specified during construction of
this object. This method reduces all the spectra present in the
reflected beam file (see platypusnexus.PlatypusNexus.process for
eventmode specification and other related options), but aggregates
all data in the direct beam spectrum.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>reflect</strong> (<a class="reference external" href="https://docs.python.org/3/library/string.html#module-string" title="(in Python v3.6)"><em>string</em></a><em>, </em><em>hdf5 file-handle</em><em> or </em><em>PlatypusNexus object</em>) – A string containing the path to the specularly reflected hdf5 file,
the hdf5 file itself, or a PlatypusNexus object.</li>
<li><strong>scale</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a><em>, </em><em>optional</em>) – Divide all the reflectivity values by this number.</li>
<li><strong>save</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.6)"><em>bool</em></a><em>, </em><em>optional</em>) – If <cite>True</cite> then the reduced dataset is saved to the current
directory, with a name os.path.basename(reflect)</li>
<li><strong>kwds</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.6)"><em>dict</em></a><em>, </em><em>optional</em>) – Options passed directly to <cite>refnx.reduce.platypusnexus.process</cite>,
for processing of individual spectra. Look at that method docstring
for specification of options.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>reduction</strong> (<em>dict</em>) – Contains the following entries:<ul>
<li><dl class="first docutils">
<dt>’xdata’ <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>Q values, shape (N, T).</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>’xdata_sd’ <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>Uncertainty in Q values (FWHM), shape (N, T).</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>’ydata’ <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>Specular Reflectivity, shape (N, T)</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>’ydata_sd’ <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>Uncertainty in specular reflectivity (SD), shape (N, T)</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>’omega’ <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>Angle of incidence, shape (N, T)</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>’m_ref’ <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>Offspecular reflectivity map, shape (N, T, Y)</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>’m_ref_sd’ <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>uncertainty in offspecular reflectivity, shape (N, T, Y)</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>’m_qz’ <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>Qz for offspecular map, shape (N, T, Y)</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>’m_qy’ <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>Qy for offspecular map, shape (N, T, Y)</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>’n_spectra’ <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>number of reflectivity spectra</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>’datafile_number’ <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>run number for the reflected beam</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>’fname’ <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd>the saved filenames</dd>
</dl>
</li>
</ul>
</li>
<li><em>N corresponds to the number of spectra</em></li>
<li><em>T corresponds to the number of Q (wavelength) bins</em></li>
<li><em>Y corresponds to the number of y pixels on the detector.</em></li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>All the values returned from this method are also contained as instance
attributes for this object.</p>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">refnx.reduce</span> <span class="k">import</span> <span class="n">PlatypusReduce</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># set up with a direct beam</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reducer</span> <span class="o">=</span> <span class="n">PlatypusReduce</span><span class="p">(</span><span class="s1">&#39;PLP0000711.nx.hdf&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reduction</span> <span class="o">=</span> <span class="n">reducer</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="s1">&#39;PLP0000708.nx.hdf&#39;</span><span class="p">,</span> <span class="n">rebin_percent</span><span class="o">=</span><span class="mf">3.</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="refnx.reduce.reduce.PlatypusReduce.scale">
<code class="descname">scale</code><span class="sig-paren">(</span><em>scale</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/reduce.html#PlatypusReduce.scale"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.reduce.PlatypusReduce.scale" title="Permalink to this definition">¶</a></dt>
<dd><p>Divides the reflectivity values by this scale factor</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>scale</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – Divides the reflectivity values by a constant amount</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="refnx.reduce.reduce.PlatypusReduce.write_offspecular">
<code class="descname">write_offspecular</code><span class="sig-paren">(</span><em>f</em>, <em>scanpoint=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/reduce.html#PlatypusReduce.write_offspecular"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.reduce.PlatypusReduce.write_offspecular" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="refnx.reduce.reduce.reduce_stitch">
<code class="descclassname">refnx.reduce.reduce.</code><code class="descname">reduce_stitch</code><span class="sig-paren">(</span><em>reflect_list</em>, <em>direct_list</em>, <em>background_list=None</em>, <em>norm_file_num=None</em>, <em>data_folder=None</em>, <em>trim_trailing=True</em>, <em>save=True</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/reduce.html#reduce_stitch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.reduce.reduce_stitch" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduces a list of reflected beam run numbers and a list of corresponding
direct beam run numbers from the Platypus reflectometer. If there are
multiple reflectivity files they are spliced together.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>reflect_list</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.6)"><em>list</em></a>) – Reflected beam run numbers, e.g. <cite>[708, 709, 710]</cite>
708 corresponds to the file PLP0000708.nx.hdf.</li>
<li><strong>direct_list</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.6)"><em>list</em></a>) – Direct beam run numbers, e.g. <cite>[711, 711, 711]</cite></li>
<li><strong>background_list</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.6)"><em>list</em></a><em>, </em><em>optional</em>) – List of <cite>bool</cite> to control whether background subtraction is used
for each reduction, e.g. <cite>[False, True, True]</cite></li>
<li><strong>norm_file_num</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)"><em>int</em></a><em>, </em><em>optional</em>) – The run number for the water flood field correction.</li>
<li><strong>data_folder</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a><em>, </em><em>optional</em>) – Where is the raw data stored?</li>
<li><strong>trim_trailing</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.6)"><em>bool</em></a><em>, </em><em>optional</em>) – When datasets are spliced together do you want to remove points in the
overlap region from the preceding dataset?</li>
<li><strong>save</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.6)"><em>bool</em></a><em>, </em><em>optional</em>) – If <cite>True</cite> then the spliced file is written to a file (in the working
directory) with a name like: <cite>c_PLP0000708.dat</cite>.</li>
<li><strong>kwds</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.6)"><em>dict</em></a><em>, </em><em>optional</em>) – Options passed directly to <cite>refnx.reduce.platypusnexus.process</cite>,
for processing of individual spectra. Look at that method docstring
for specification of options.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>combined_dataset, reduced_filename</strong> – The combined dataset and the file name of the reduced data, if it was
saved. If it wasn’t saved <cite>reduced_filename</cite> is <cite>None</cite>.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="refnx.dataset.html#refnx.dataset.ReflectDataset" title="refnx.dataset.ReflectDataset">refnx.dataset.ReflectDataset</a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)">str</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-refnx.reduce.xray">
<span id="refnx-reduce-xray-module"></span><h2>refnx.reduce.xray module<a class="headerlink" href="#module-refnx.reduce.xray" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="refnx.reduce.xray.parse_xrdml_file">
<code class="descclassname">refnx.reduce.xray.</code><code class="descname">parse_xrdml_file</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/xray.html#parse_xrdml_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.xray.parse_xrdml_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses an XRML file</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>f</strong> (<em>file-like object</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/string.html#module-string" title="(in Python v3.6)"><em>string</em></a>) – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>d</strong> – A dictionary containing the XRDML file information.  The following keys
are used:<dl class="docutils">
<dt>’intensities’ - np.ndarray</dt>
<dd>Intensities</dd>
<dt>’twotheta’ - np.ndarray</dt>
<dd>Two theta values</dd>
<dt>’omega’ - np.ndarray</dt>
<dd>Omega values</dd>
<dt>’count_time’ - float</dt>
<dd>How long each point was counted for</dd>
<dt>’wavelength’ - float</dt>
<dd>Wavelength of X-ray radiation</dd>
</dl>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.6)">dict</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="refnx.reduce.xray.process_offspec">
<code class="descclassname">refnx.reduce.xray.</code><code class="descname">process_offspec</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/xray.html#process_offspec"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.xray.process_offspec" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a 2D XRDML file and return qy, qz, intensity, dintensity</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>f</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a><em> or </em><em>file-like</em>) – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">qy, qz, intensity, dintensity</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="refnx.reduce.xray.reduce_xrdml">
<code class="descclassname">refnx.reduce.xray.</code><code class="descname">reduce_xrdml</code><span class="sig-paren">(</span><em>f</em>, <em>bkg=None</em>, <em>scale=1</em>, <em>sample_length=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/xray.html#reduce_xrdml"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.xray.reduce_xrdml" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduces a Panalytical XRDML file</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>f</strong> (<em>file-like object</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/string.html#module-string" title="(in Python v3.6)"><em>string</em></a>) – The specular reflectivity (XRDML) file of interest</li>
<li><strong>bkg</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.6)"><em>list</em></a>) – A list of file-like objects or strings that contain background
measurements. The background is assumed to have the same number of
points as the specular reflectivity curve.  The backgrounds are
averaged and subtracted from the specular reflectivity</li>
<li><strong>scale</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – The direct beam intensity (cps)</li>
<li><strong>sample_length</strong> (<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.6)"><em>None</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – If None then no footprint correction is done. Otherwise the transverse
footprint of the sample (mm).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>specular_q, specular_r, specular_dr</strong> – The specular reflectivity as a function of momentum transfer, Q.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">np.ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-refnx.reduce">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-refnx.reduce" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="refnx.reduce.BatchReducer">
<em class="property">class </em><code class="descclassname">refnx.reduce.</code><code class="descname">BatchReducer</code><span class="sig-paren">(</span><em>filename</em>, <em>data_folder=None</em>, <em>verbose=True</em>, <em>persistent=True</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/batchreduction.html#BatchReducer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.BatchReducer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Batch reduction of reflectometry data based on spreadsheet metadata.</p>
<p class="rubric">Example</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">refnx.reduce</span> <span class="k">import</span> <span class="n">BatchReducer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_folder</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;V:\data\current&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">BatchReducer</span><span class="p">(</span><span class="s1">&#39;reduction.xls&#39;</span><span class="p">,</span> <span class="n">data_folder</span><span class="o">=</span><span class="n">data_folder</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">.</span><span class="n">reduce</span><span class="p">()</span>
</pre></div>
</div>
<p>The spreadsheet must have columns:</p>
<blockquote>
<div>reduce name scale refl1 refl2 refl3 dir1 dir2 dir3</div></blockquote>
<p>Only rows where the value of the <cite>reduce</cite> column is 1 and where the sample
name is set will be processed.</p>
<dl class="method">
<dt id="refnx.reduce.BatchReducer.load_runs">
<code class="descname">load_runs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/batchreduction.html#BatchReducer.load_runs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.BatchReducer.load_runs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="refnx.reduce.BatchReducer.reduce">
<code class="descname">reduce</code><span class="sig-paren">(</span><em>show=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/batchreduction.html#BatchReducer.reduce"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.BatchReducer.reduce" title="Permalink to this definition">¶</a></dt>
<dd><p>Batch reduce data based on metadata from a spreadsheet</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>show</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.6)"><em>bool</em></a><em> (</em><em>optional</em><em>, </em><em>default=True</em><em>)</em>) – display a summary table of the rows that were reduced</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="refnx.reduce.BatchReducer.select_runs">
<code class="descname">select_runs</code><span class="sig-paren">(</span><em>all_runs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/batchreduction.html#BatchReducer.select_runs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.BatchReducer.select_runs" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="refnx.reduce.Catalogue">
<em class="property">class </em><code class="descclassname">refnx.reduce.</code><code class="descname">Catalogue</code><span class="sig-paren">(</span><em>h5d</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#Catalogue"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.Catalogue" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Extract relevant parts of a NeXus file for reflectometry reduction</p>
<dl class="attribute">
<dt id="refnx.reduce.Catalogue.datafile_number">
<code class="descname">datafile_number</code><a class="headerlink" href="#refnx.reduce.Catalogue.datafile_number" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="refnx.reduce.PlatypusNexus">
<em class="property">class </em><code class="descclassname">refnx.reduce.</code><code class="descname">PlatypusNexus</code><span class="sig-paren">(</span><em>h5data</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#PlatypusNexus"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.PlatypusNexus" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Processes Platypus NeXus files to produce an intensity vs wavelength
spectrum</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>h5data</strong> (<em>HDF5 NeXus file</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) – An HDF5 NeXus file for Platypus, or a <cite>str</cite> containing the path
to one</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="refnx.reduce.PlatypusNexus.chod">
<code class="descname">chod</code><span class="sig-paren">(</span><em>omega=0.0</em>, <em>twotheta=0.0</em>, <em>scanpoint=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#PlatypusNexus.chod"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.PlatypusNexus.chod" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the flight length of the neutrons in the Platypus
instrument.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>omega</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a><em>, </em><em>optional</em>) – Rough angle of incidence</li>
<li><strong>twotheta</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a><em>, </em><em>optional</em>) – Rough 2 theta angle</li>
<li><strong>scanpoint</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)"><em>int</em></a><em>, </em><em>optional</em>) – Which dataset is being considered</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>chod, d_cx</strong> – Flight distance (mm), distance between chopper discs (mm)</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)">float</a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)">float</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="refnx.reduce.PlatypusNexus.phase_angle">
<code class="descname">phase_angle</code><span class="sig-paren">(</span><em>scanpoint=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#PlatypusNexus.phase_angle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.PlatypusNexus.phase_angle" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the phase angle for a given scanpoint</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>scanpoint</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)"><em>int</em></a>) – The scanpoint you’re interested in</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>phase_angle, master_opening</strong> – The phase angle in degrees, and the angular opening of the master
chopper</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)">float</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="refnx.reduce.PlatypusNexus.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>h5norm=None</em>, <em>lo_wavelength=2.5</em>, <em>hi_wavelength=19.0</em>, <em>background=True</em>, <em>direct=False</em>, <em>omega=None</em>, <em>twotheta=None</em>, <em>rebin_percent=1.0</em>, <em>wavelength_bins=None</em>, <em>normalise=True</em>, <em>integrate=-1</em>, <em>eventmode=None</em>, <em>event_folder=None</em>, <em>peak_pos=None</em>, <em>peak_pos_tol=0.01</em>, <em>background_mask=None</em>, <em>normalise_bins=True</em>, <em>manual_beam_find=None</em>, <em>event_filter=None</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#PlatypusNexus.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.PlatypusNexus.process" title="Permalink to this definition">¶</a></dt>
<dd><p>Processes the ProcessNexus object to produce a time of flight spectrum.
The processed spectrum is stored in the <cite>processed_spectrum</cite> attribute.
The specular spectrum is also returned from this function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>h5norm</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a><em> or </em><em>HDF5 NeXus file</em>) – If a str then <cite>h5norm</cite> is a path to the floodfield data, otherwise
it is a hdf5 file handle containing the floodfield data.</li>
<li><strong>lo_wavelength</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – The low wavelength cutoff for the rebinned data (A).</li>
<li><strong>hi_wavelength</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – The high wavelength cutoff for the rebinned data (A).</li>
<li><strong>background</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.6)"><em>bool</em></a>) – Should a background subtraction be carried out?</li>
<li><strong>direct</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.6)"><em>bool</em></a>) – Is it a direct beam you measured? This is so a gravity correction
can be applied.</li>
<li><strong>omega</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – Expected angle of incidence of beam. If this is None, then the
rough angle of incidence is obtained from the NeXus file.</li>
<li><strong>twotheta</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – Expected two theta value of specular beam. If this is None then
the rough angle of incidence is obtained from the NeXus file.</li>
<li><strong>rebin_percent</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – Specifies the rebinning percentage for the spectrum.  If
<cite>rebin_percent is None</cite>, then no rebinning is done.</li>
<li><strong>wavelength_bins</strong> (<em>array_like</em>) – The wavelength bins for rebinning.  If <cite>wavelength_bins is not
None</cite> then the <cite>rebin_percent</cite> parameter is ignored.</li>
<li><strong>normalise</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.6)"><em>bool</em></a>) – Normalise by the monitor counts.</li>
<li><strong>integrate</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)"><em>int</em></a>) – <p>Specifies which scanpoints to use.</p>
<blockquote>
<div><ul>
<li>integrate == -1
the spectrum is integrated over all the scanpoints.</li>
<li>integrate &gt;= 0
the individual spectra are calculated individually.
If <cite>eventmode is not None</cite>, or <cite>event_filter is not None</cite> then
integrate specifies which scanpoint to examine.</li>
</ul>
</div></blockquote>
</li>
<li><strong>eventmode</strong> (<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.6)"><em>None</em></a><em> or </em><em>array_like</em>) – If eventmode is <cite>None</cite> then the integrated detector image is used.
If eventmode is an array then the array specifies the integration
times (in seconds) for the detector image, e.g. [0, 20, 30] would
result in two spectra. The first would contain data for 0 s to 20s,
the second would contain data for 20 s to 30 s.  This option can
only be used when <cite>integrate &gt;= -1</cite>.
If eventmode has zero length (e.g. []), then a single time interval
for the entire acquisition is used, [0, acquisition_time].  This
would source the image from the eventmode file, rather than the
NeXUS file. The two approaches will probably not give
identical results, because the eventmode method adjusts the total
acquisition time and beam monitor counts to the frame number of the
last event detected (which may be quite different if the count rate
is very low). This parameter is disregarded if <cite>event_filter</cite> is
provided.</li>
<li><strong>event_folder</strong> (<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.6)"><em>None</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) – Specifies the path for the eventmode data. If
<cite>event_folder is None</cite> then the eventmode data is assumed to reside
in the same directory as the NeXUS file. If event_folder is a
string, then the string specifies the path to the eventmode data.</li>
<li><strong>peak_pos</strong> (<em>-1</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.6)"><em>None</em></a><em>, or </em><em>(</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a><em>)</em>) – <p>Options for finding specular peak position and peak standard
deviation.</p>
<ul>
<li><dl class="first docutils">
<dt>-1</dt>
<dd>use <cite>manual_beam_find</cite>.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>None</dt>
<dd>use the automatic beam finder, falling back to
<cite>manual_beam_find</cite> if it’s provided.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>(float, float)</dt>
<dd>specify the peak and peak standard deviation.</dd>
</dl>
</li>
</ul>
</li>
<li><strong>peak_pos_tol</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – Convergence tolerance for the beam position and width to be
accepted from successive beam-finder calculations; see the
<cite>tol</cite> parameter in the <cite>find_specular_ridge</cite> function.</li>
<li><strong>background_mask</strong> (<em>array_like</em>) – An array of bool that specifies which y-pixels to use for
background subtraction.  Should be the same length as the number of
y pixels in the detector image.  Otherwise an automatic mask is
applied (if background is True).</li>
<li><strong>normalise_bins</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.6)"><em>bool</em></a>) – Divides the intensity in each wavelength bin by the width of the
bin. This allows one to compare spectra even if they were processed
with different rebin percentages.</li>
<li><strong>manual_beam_find</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#callable" title="(in Python v3.6)"><em>callable</em></a><em>, </em><em>optional</em>) – A function which allows the location of the specular ridge to be
determined. Has the signature <cite>f(detector, detector_err)</cite> where
<cite>detector</cite> and <cite>detector_err</cite> is the detector image and its
uncertainty. <cite>detector</cite> and <cite>detector_err</cite> have shape (n, t, y)
where <cite>n</cite> is the number of detector images, <cite>t</cite> is the number of
time of flight bins and <cite>y</cite> is the number of y pixels. The function
should return a tuple,
<cite>(centre, centre_sd, lopx, hipx, background_pixels)</cite>. <cite>centre</cite>,
<cite>centre_sd</cite>, <cite>lopx</cite>, <cite>hipx</cite> should be arrays of shape <cite>(n, )</cite>,
specifying the beam centre, beam width (standard deviation), lowest
pixel of foreground region, highest pixel of foreground region.
<cite>background_pixels</cite> is a list of length <cite>n</cite>. Each of the entries
should contain arrays of pixel numbers that specify the background
region for each of the detector images.</li>
<li><strong>event_filter</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#callable" title="(in Python v3.6)"><em>callable</em></a><em>, </em><em>optional</em>) – <p>A function, that processes the event stream, returning a <cite>detector</cite>
array, and a <cite>frame_count</cite> array. <cite>detector</cite> has shape
<cite>(N, T, Y, X)</cite>, where <cite>N</cite> is the number of detector images, <cite>T</cite> is
the number of time bins (<cite>len(t_bins)</cite>), etc. <cite>frame_count</cite> has
shape <cite>(N,)</cite> and contains the number of frames for each of the
detector images. The frame_count is used to determine what fraction
of the overall monitor counts should be ascribed to each detector
image (by dividing by the total number of frames). The function has
signature:</p>
<dl class="docutils">
<dt>detector, frame_count = event_filter(loaded_events,</dt>
<dd>t_bins=None,
y_bins=None,
x_bins=None)</dd>
</dl>
<p><cite>loaded_events</cite> is a 4-tuple of numpy arrays:
<cite>(f_events, t_events, y_events, x_events)</cite>, where <cite>f_events</cite>
contains the frame number for each neutron, landing at position
<cite>x_events, y_events</cite> on the detector, with time-of-flight
<cite>t_events</cite>.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>After processing this object contains the following the following
attributes:</p>
<ul class="simple">
<li>path - path to the data file</li>
<li>datafilename - name of the datafile</li>
<li>datafile_number - datafile number.</li>
<li>m_topandtail - the corrected 2D detector image, (n_spectra, TOF, Y)</li>
<li>m_topandtail_sd - corresponding standard deviations</li>
<li>n_spectra - number of spectra in processed data</li>
<li>bm1_counts - beam montor counts, (n_spectra,)</li>
<li>m_spec - specular intensity, (n_spectra, TOF)</li>
<li>m_spec_sd - corresponding standard deviations</li>
<li>m_beampos - beam_centre for each spectrum, (n_spectra, )</li>
<li>m_lambda - wavelengths for each spectrum, (n_spectra, TOF)</li>
<li>m_lambda_fwhm - corresponding FWHM of wavelength distribution</li>
<li>m_lambda_hist - wavelength bins for each spectrum, (n_spectra, TOF)</li>
<li>m_spec_tof - TOF for each wavelength bin, (n_spectra, TOF)</li>
<li>mode - the Platypus mode, e.g. FOC/MT/POL/POLANAL/SB/DB</li>
<li>detector_z - detector height, (n_spectra, )</li>
<li>detector_y - sample-detector distance, (n_spectra, )</li>
<li>domega - collimation uncertainty</li>
<li>lopx - lowest extent of specular beam (in y pixels), (n_spectra, )</li>
<li>hipx - highest extent of specular beam (in y pixels), (n_spectra, )</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>m_lambda, m_spec, m_spec_sd</strong> – Arrays containing the wavelength, specular intensity as a function
of wavelength, standard deviation of specular intensity</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">np.ndarray</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="refnx.reduce.PlatypusNexus.process_event_stream">
<code class="descname">process_event_stream</code><span class="sig-paren">(</span><em>t_bins=None</em>, <em>x_bins=None</em>, <em>y_bins=None</em>, <em>frame_bins=None</em>, <em>scanpoint=0</em>, <em>event_folder=None</em>, <em>event_filter=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#PlatypusNexus.process_event_stream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.PlatypusNexus.process_event_stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Processes the event mode dataset for the NeXUS file. Assumes that
there is a event mode directory in the same directory as the NeXUS
file, as specified by in ‘entry1/instrument/detector/daq_dirname’</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>t_bins</strong> (<em>array_like</em><em>, </em><em>optional</em>) – specifies the time bins required in the image</li>
<li><strong>x_bins</strong> (<em>array_like</em><em>, </em><em>optional</em>) – specifies the x bins required in the image</li>
<li><strong>y_bins</strong> (<em>array_like</em><em>, </em><em>optional</em>) – specifies the y bins required in the image</li>
<li><strong>scanpoint</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)"><em>int</em></a><em>, </em><em>optional</em>) – Scanpoint you are interested in</li>
<li><strong>event_folder</strong> (<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.6)"><em>None</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) – Specifies the path for the eventmode data. If
<cite>event_folder is None</cite> then the eventmode data is assumed to reside
in the same directory as the NeXUS file. If event_folder is a
string, then the string specifies the path to the eventmode data.</li>
<li><strong>frame_bins</strong> (<em>array_like</em><em>, </em><em>optional</em>) – specifies the frame bins required in the image. If
frame_bins = [5, 10, 120] you will get 2 images.  The first starts
at 5s and finishes at 10s. The second starts at 10s and finishes
at 120s. If frame_bins has zero length, e.g. [], then a single
interval consisting of the entire acquisition time is used:
[0, acquisition_time]. If <cite>event_filter</cite> is provided then this
parameter is ignored.</li>
<li><strong>event_filter</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#callable" title="(in Python v3.6)"><em>callable</em></a><em>, </em><em>optional</em>) – <p>A function, that processes the event stream, returning a <cite>detector</cite>
array, and a <cite>frame_count</cite> array. <cite>detector</cite> has shape
<cite>(N, T, Y, X)</cite>, where <cite>N</cite> is the number of detector images, <cite>T</cite> is
the number of time bins (<cite>len(t_bins)</cite>), etc. <cite>frame_count</cite> has
shape <cite>(N,)</cite> and contains the number of frames for each of the
detector images. The frame_count is used to determine what fraction
of the overall monitor counts should be ascribed to each detector
image. The function has signature:</p>
<dl class="docutils">
<dt>detector, frame_count = event_filter(loaded_events,</dt>
<dd>t_bins=None,
y_bins=None,
x_bins=None)</dd>
</dl>
<p><cite>loaded_events</cite> is a 4-tuple of numpy arrays:
<cite>(f_events, t_events, y_events, x_events)</cite>, where <cite>f_events</cite>
contains the frame number for each neutron, landing at position
<cite>x_events, y_events</cite> on the detector, with time-of-flight
<cite>t_events</cite>.</p>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>detector, frame_count, bm1_counts</strong> (<em>np.ndarray, np.ndarray, np.ndarray</em>)</li>
<li><em>Create a new detector image based on the t_bins, x_bins, y_bins and</em></li>
<li><em>frame_bins you supply to the method (these should all be lists/numpy</em></li>
<li><em>arrays specifying the edges of the required bins). If these are not</em></li>
<li><em>specified, then the default bins are taken from the nexus file. This</em></li>
<li><em>would essentially return the same detector image as the nexus file.</em></li>
<li><em>However, you can specify the frame_bins list to generate detector</em></li>
<li><em>images based on subdivided periods of the total acquisition.</em></li>
<li><em>For example if frame_bins = [5, 10, 120] you will get 2 images.  The</em></li>
<li><em>first starts at 5s and finishes at 10s. The second starts at 10s</em></li>
<li><em>and finishes at 120s. The frame_bins are clipped to the total</em></li>
<li><em>acquisition time if necessary.</em></li>
<li><cite>frame_count</cite> is how many frames went into making each detector image.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="refnx.reduce.PlatypusNexus.spectrum">
<code class="descname">spectrum</code><a class="headerlink" href="#refnx.reduce.PlatypusNexus.spectrum" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="refnx.reduce.PlatypusNexus.write_spectrum_dat">
<code class="descname">write_spectrum_dat</code><span class="sig-paren">(</span><em>f</em>, <em>scanpoint=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#PlatypusNexus.write_spectrum_dat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.PlatypusNexus.write_spectrum_dat" title="Permalink to this definition">¶</a></dt>
<dd><p>This method writes a dat representation of the corrected spectrum to
file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>f</strong> (<em>file-like</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) – The file to write the spectrum to, or a str that specifies the file
name</li>
<li><strong>scanpoint</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)"><em>int</em></a>) – Which scanpoint to write</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>processed</strong> – If the file hasn’t been processed then the <cite>processed is False</cite> and
vice versa</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.6)">bool</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="refnx.reduce.PlatypusNexus.write_spectrum_xml">
<code class="descname">write_spectrum_xml</code><span class="sig-paren">(</span><em>f</em>, <em>scanpoint=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#PlatypusNexus.write_spectrum_xml"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.PlatypusNexus.write_spectrum_xml" title="Permalink to this definition">¶</a></dt>
<dd><p>This method writes an XML representation of the corrected spectrum to
file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>f</strong> (<em>file-like</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) – The file to write the spectrum to, or a str that specifies the file
name</li>
<li><strong>scanpoint</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)"><em>int</em></a>) – Which scanpoint to write</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="refnx.reduce.PlatypusReduce">
<em class="property">class </em><code class="descclassname">refnx.reduce.</code><code class="descname">PlatypusReduce</code><span class="sig-paren">(</span><em>direct</em>, <em>reflect=None</em>, <em>data_folder=None</em>, <em>scale=1.0</em>, <em>save=True</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/reduce.html#PlatypusReduce"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.PlatypusReduce" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Reduces Platypus reflectometer data to give the specular reflectivity.
Offspecular data maps are also produced.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>direct</strong> (<a class="reference external" href="https://docs.python.org/3/library/string.html#module-string" title="(in Python v3.6)"><em>string</em></a><em>, </em><em>hdf5 file-handle</em><em> or </em><em>PlatypusNexus object</em>) – A string containing the path to the direct beam hdf5 file,
the hdf5 file itself, or a PlatypusNexus object.</li>
<li><strong>reflect</strong> (<a class="reference external" href="https://docs.python.org/3/library/string.html#module-string" title="(in Python v3.6)"><em>string</em></a><em>, </em><em>hdf5 file-handle</em><em> or </em><em>PlatypusNexus object</em><em>, </em><em>optional</em>) – A string containing the path to the specularly reflected hdf5 file,
the hdf5 file itself, or a PlatypusNexus object.</li>
<li><strong>data_folder</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a><em>, </em><em>optional</em>) – Where is the raw data stored?</li>
<li><strong>scale</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a><em>, </em><em>optional</em>) – Divide all specular reflectivity values by this number.</li>
<li><strong>save</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.6)"><em>bool</em></a><em>, </em><em>optional</em>) – If <cite>True</cite> then the reduced dataset is saved to the current
directory, with a name os.path.basename(reflect)</li>
<li><strong>kwds</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.6)"><em>dict</em></a><em>, </em><em>optional</em>) – Options passed directly to <cite>refnx.reduce.platypusnexus.process</cite>,
for processing of individual spectra. Look at that method docstring
for specification of options.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>If <cite>reflect</cite> was specified during construction a reduction will be
done. See <code class="docutils literal"><span class="pre">reduce</span></code> for attributes available from this object on
completion of reduction.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.6)">None</a></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="refnx.reduce.PlatypusReduce.data">
<code class="descname">data</code><span class="sig-paren">(</span><em>scanpoint=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/reduce.html#PlatypusReduce.data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.PlatypusReduce.data" title="Permalink to this definition">¶</a></dt>
<dd><p>The specular reflectivity</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>scanpoint</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)"><em>int</em></a>) – Find a particular specular reflectivity image. scanpoints upto
<cite>self.n_spectra - 1</cite> can be specified.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>(Q, R, dR, dQ)</strong> – dR is standard deviation, dQ is FWHM</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">np.ndarray tuple</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="refnx.reduce.PlatypusReduce.data2d">
<code class="descname">data2d</code><span class="sig-paren">(</span><em>scanpoint=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/reduce.html#PlatypusReduce.data2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.PlatypusReduce.data2d" title="Permalink to this definition">¶</a></dt>
<dd><p>The offspecular data</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>scanpoint</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)"><em>int</em></a>) – Find a particular offspecular image. scanpoints upto
self.n_spectra - 1 can be specified.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>(Qz, Qy, R, dR)</strong></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">np.ndarrays</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="refnx.reduce.PlatypusReduce.reduce">
<code class="descname">reduce</code><span class="sig-paren">(</span><em>reflect</em>, <em>scale=1.0</em>, <em>save=True</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/reduce.html#PlatypusReduce.reduce"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.PlatypusReduce.reduce" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduction of a single dataset.</p>
<p>The reduction uses the direct beam specified during construction of
this object. This method reduces all the spectra present in the
reflected beam file (see platypusnexus.PlatypusNexus.process for
eventmode specification and other related options), but aggregates
all data in the direct beam spectrum.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>reflect</strong> (<a class="reference external" href="https://docs.python.org/3/library/string.html#module-string" title="(in Python v3.6)"><em>string</em></a><em>, </em><em>hdf5 file-handle</em><em> or </em><em>PlatypusNexus object</em>) – A string containing the path to the specularly reflected hdf5 file,
the hdf5 file itself, or a PlatypusNexus object.</li>
<li><strong>scale</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a><em>, </em><em>optional</em>) – Divide all the reflectivity values by this number.</li>
<li><strong>save</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.6)"><em>bool</em></a><em>, </em><em>optional</em>) – If <cite>True</cite> then the reduced dataset is saved to the current
directory, with a name os.path.basename(reflect)</li>
<li><strong>kwds</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.6)"><em>dict</em></a><em>, </em><em>optional</em>) – Options passed directly to <cite>refnx.reduce.platypusnexus.process</cite>,
for processing of individual spectra. Look at that method docstring
for specification of options.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li><strong>reduction</strong> (<em>dict</em>) – Contains the following entries:<ul>
<li><dl class="first docutils">
<dt>’xdata’ <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>Q values, shape (N, T).</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>’xdata_sd’ <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>Uncertainty in Q values (FWHM), shape (N, T).</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>’ydata’ <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>Specular Reflectivity, shape (N, T)</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>’ydata_sd’ <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>Uncertainty in specular reflectivity (SD), shape (N, T)</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>’omega’ <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>Angle of incidence, shape (N, T)</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>’m_ref’ <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>Offspecular reflectivity map, shape (N, T, Y)</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>’m_ref_sd’ <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>uncertainty in offspecular reflectivity, shape (N, T, Y)</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>’m_qz’ <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>Qz for offspecular map, shape (N, T, Y)</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>’m_qy’ <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>Qy for offspecular map, shape (N, T, Y)</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>’n_spectra’ <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>number of reflectivity spectra</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>’datafile_number’ <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>run number for the reflected beam</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>’fname’ <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd>the saved filenames</dd>
</dl>
</li>
</ul>
</li>
<li><em>N corresponds to the number of spectra</em></li>
<li><em>T corresponds to the number of Q (wavelength) bins</em></li>
<li><em>Y corresponds to the number of y pixels on the detector.</em></li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>All the values returned from this method are also contained as instance
attributes for this object.</p>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">refnx.reduce</span> <span class="k">import</span> <span class="n">PlatypusReduce</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># set up with a direct beam</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reducer</span> <span class="o">=</span> <span class="n">PlatypusReduce</span><span class="p">(</span><span class="s1">&#39;PLP0000711.nx.hdf&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reduction</span> <span class="o">=</span> <span class="n">reducer</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="s1">&#39;PLP0000708.nx.hdf&#39;</span><span class="p">,</span> <span class="n">rebin_percent</span><span class="o">=</span><span class="mf">3.</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="refnx.reduce.PlatypusReduce.scale">
<code class="descname">scale</code><span class="sig-paren">(</span><em>scale</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/reduce.html#PlatypusReduce.scale"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.PlatypusReduce.scale" title="Permalink to this definition">¶</a></dt>
<dd><p>Divides the reflectivity values by this scale factor</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>scale</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – Divides the reflectivity values by a constant amount</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="refnx.reduce.PlatypusReduce.write_offspecular">
<code class="descname">write_offspecular</code><span class="sig-paren">(</span><em>f</em>, <em>scanpoint=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/reduce.html#PlatypusReduce.write_offspecular"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.PlatypusReduce.write_offspecular" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="refnx.reduce.accumulate_HDF_files">
<code class="descclassname">refnx.reduce.</code><code class="descname">accumulate_HDF_files</code><span class="sig-paren">(</span><em>files</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#accumulate_HDF_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.accumulate_HDF_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Accumulates HDF files together, writing an accumulated file in the current
directory. The accumulated datafile is written in the current directory
(os.getcwd()) and has a filename based on the first file, prepended by
‘ADD_’. For example, if the first file is PLP0000708.nx.hdf then the
accumulated file is ADD_PLP0000708.nx.hdf.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>files</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.6)"><em>list</em></a>) – Strings specifying NeXUS filenames to be added together.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="refnx.reduce.basename_datafile">
<code class="descclassname">refnx.reduce.</code><code class="descname">basename_datafile</code><span class="sig-paren">(</span><em>pth</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#basename_datafile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.basename_datafile" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a NeXUS path return the basename minus the file extension.
:param pth:
:type pth: str</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>basename</strong></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)">str</a></td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">basename_datafile</span><span class="p">(</span><span class="s1">&#39;a/b/c.nx.hdf&#39;</span><span class="p">)</span>
<span class="go">&#39;c&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="refnx.reduce.catalogue">
<code class="descclassname">refnx.reduce.</code><code class="descname">catalogue</code><span class="sig-paren">(</span><em>start</em>, <em>stop</em>, <em>path=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#catalogue"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.catalogue" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract interesting information from Platypus NeXUS files.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>start</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)"><em>int</em></a>) – start cataloguing from this run number.</li>
<li><strong>stop</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)"><em>int</em></a>) – stop cataloguing at this run number</li>
<li><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a><em>, </em><em>optional</em>) – path specifying location of NeXUS files</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>catalog</strong> – Dataframe containing interesting parameters from Platypus Nexus files</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">pd.DataFrame</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="refnx.reduce.datafile_number">
<code class="descclassname">refnx.reduce.</code><code class="descname">datafile_number</code><span class="sig-paren">(</span><em>fname</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#datafile_number"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.datafile_number" title="Permalink to this definition">¶</a></dt>
<dd><p>From a filename figure out what the run number was</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>fname</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) – The filename to be processed</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>run_number</strong> – The run number</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)">int</a></td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">datafile_number</span><span class="p">(</span><span class="s1">&#39;PLP0000708.nx.hdf&#39;</span><span class="p">)</span>
<span class="go">708</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="refnx.reduce.number_datafile">
<code class="descclassname">refnx.reduce.</code><code class="descname">number_datafile</code><span class="sig-paren">(</span><em>run_number</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/platypusnexus.html#number_datafile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.number_datafile" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a run number figure out what the file name is.
Given a file name, return the filename with the .nx.hdf extension</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>run_number</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>file_name</strong></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)">str</a></td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">number_datafile</span><span class="p">(</span><span class="mi">708</span><span class="p">)</span>
<span class="go">&#39;PLP0000708.nx.hdf</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">number_datafile</span><span class="p">(</span><span class="s1">&#39;PLP0000708.nx.hdf&#39;</span><span class="p">)</span>
<span class="go">&#39;PLP0000708.nx.hdf&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="refnx.reduce.reduce_stitch">
<code class="descclassname">refnx.reduce.</code><code class="descname">reduce_stitch</code><span class="sig-paren">(</span><em>reflect_list</em>, <em>direct_list</em>, <em>background_list=None</em>, <em>norm_file_num=None</em>, <em>data_folder=None</em>, <em>trim_trailing=True</em>, <em>save=True</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/reduce.html#reduce_stitch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.reduce_stitch" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduces a list of reflected beam run numbers and a list of corresponding
direct beam run numbers from the Platypus reflectometer. If there are
multiple reflectivity files they are spliced together.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>reflect_list</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.6)"><em>list</em></a>) – Reflected beam run numbers, e.g. <cite>[708, 709, 710]</cite>
708 corresponds to the file PLP0000708.nx.hdf.</li>
<li><strong>direct_list</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.6)"><em>list</em></a>) – Direct beam run numbers, e.g. <cite>[711, 711, 711]</cite></li>
<li><strong>background_list</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.6)"><em>list</em></a><em>, </em><em>optional</em>) – List of <cite>bool</cite> to control whether background subtraction is used
for each reduction, e.g. <cite>[False, True, True]</cite></li>
<li><strong>norm_file_num</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.6)"><em>int</em></a><em>, </em><em>optional</em>) – The run number for the water flood field correction.</li>
<li><strong>data_folder</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a><em>, </em><em>optional</em>) – Where is the raw data stored?</li>
<li><strong>trim_trailing</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.6)"><em>bool</em></a><em>, </em><em>optional</em>) – When datasets are spliced together do you want to remove points in the
overlap region from the preceding dataset?</li>
<li><strong>save</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.6)"><em>bool</em></a><em>, </em><em>optional</em>) – If <cite>True</cite> then the spliced file is written to a file (in the working
directory) with a name like: <cite>c_PLP0000708.dat</cite>.</li>
<li><strong>kwds</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.6)"><em>dict</em></a><em>, </em><em>optional</em>) – Options passed directly to <cite>refnx.reduce.platypusnexus.process</cite>,
for processing of individual spectra. Look at that method docstring
for specification of options.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>combined_dataset, reduced_filename</strong> – The combined dataset and the file name of the reduced data, if it was
saved. If it wasn’t saved <cite>reduced_filename</cite> is <cite>None</cite>.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="refnx.dataset.html#refnx.dataset.ReflectDataset" title="refnx.dataset.ReflectDataset">refnx.dataset.ReflectDataset</a>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.6)">str</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="refnx.reduce.reduce_xrdml">
<code class="descclassname">refnx.reduce.</code><code class="descname">reduce_xrdml</code><span class="sig-paren">(</span><em>f</em>, <em>bkg=None</em>, <em>scale=1</em>, <em>sample_length=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refnx/reduce/xray.html#reduce_xrdml"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#refnx.reduce.reduce_xrdml" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduces a Panalytical XRDML file</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>f</strong> (<em>file-like object</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/string.html#module-string" title="(in Python v3.6)"><em>string</em></a>) – The specular reflectivity (XRDML) file of interest</li>
<li><strong>bkg</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.6)"><em>list</em></a>) – A list of file-like objects or strings that contain background
measurements. The background is assumed to have the same number of
points as the specular reflectivity curve.  The backgrounds are
averaged and subtracted from the specular reflectivity</li>
<li><strong>scale</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – The direct beam intensity (cps)</li>
<li><strong>sample_length</strong> (<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.6)"><em>None</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.6)"><em>float</em></a>) – If None then no footprint correction is done. Otherwise the transverse
footprint of the sample (mm).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>specular_q, specular_r, specular_dr</strong> – The specular reflectivity as a function of momentum transfer, Q.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">np.ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">refnx.reduce package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-refnx.reduce.bounded_splines">refnx.reduce.bounded_splines module</a></li>
<li><a class="reference internal" href="#module-refnx.reduce.event">refnx.reduce.event module</a></li>
<li><a class="reference internal" href="#module-refnx.reduce.parabolic_motion">refnx.reduce.parabolic_motion module</a></li>
<li><a class="reference internal" href="#module-refnx.reduce.peak_utils">refnx.reduce.peak_utils module</a></li>
<li><a class="reference internal" href="#module-refnx.reduce.platypusnexus">refnx.reduce.platypusnexus module</a></li>
<li><a class="reference internal" href="#module-refnx.reduce.rebin">refnx.reduce.rebin module</a></li>
<li><a class="reference internal" href="#module-refnx.reduce.reduce">refnx.reduce.reduce module</a></li>
<li><a class="reference internal" href="#module-refnx.reduce.xray">refnx.reduce.xray module</a></li>
<li><a class="reference internal" href="#module-refnx.reduce">Module contents</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/refnx.reduce.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015-2017, Andrew Nelson.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/refnx.reduce.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>